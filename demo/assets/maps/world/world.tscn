[gd_scene load_steps=15 format=3 uid="uid://8bhrc565a12u"]

[ext_resource type="TileSet" uid="uid://che8k5m1oc3hk" path="res://assets/dungeon_and_grass_tiles_01/dungeon_and_grass_01.tres" id="1_p5wdm"]
[ext_resource type="Script" path="res://assets/maps/world/world.gd" id="1_pyj42"]
[ext_resource type="PackedScene" uid="uid://cdawg40awoovw" path="res://assets/enemies/red_skeleton/red_skeleton.tscn" id="2_7maf6"]
[ext_resource type="PackedScene" uid="uid://drt3orgm278cj" path="res://assets/dungeon_and_grass_tiles_01/dungeon_door.tscn" id="3_nybb2"]
[ext_resource type="PackedScene" uid="uid://cortlhwvruty6" path="res://assets/items/heart/heart.tscn" id="3_x1x0j"]
[ext_resource type="PackedScene" uid="uid://013k056kqci8" path="res://assets/respawn_area/respawn_area.tscn" id="4_pjj1e"]
[ext_resource type="PackedScene" uid="uid://d0tq7u3gb5uay" path="res://assets/items/keys/dungeon_key.tscn" id="7_ynw14"]
[ext_resource type="Texture2D" uid="uid://bsvvs6760dy5h" path="res://assets/dungeon_and_grass_tiles_01/block-01.png" id="8_ih6g7"]
[ext_resource type="PackedScene" uid="uid://b47pbiuf1am70" path="res://assets/items/heart/big_heart.tscn" id="9_s6f1u"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_eq726"]
size = Vector2(192, 192)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_3h272"]
vertices = PackedVector2Array(758, -330, 714, -330, 714, -438, 758, -438, 886, 138, 886, 310, 874, 298, 874, 214, 822, 310, 810, 298, 810, 362, 822, 374, 650, 374, 662, 362, 650, 310, 662, 278, 758, 138, 726, 214, 886, -118, 950, -118, 950, -74, 886, -74, 886, -10, 758, -10, 586, -118, 650, 202, 726, 278, 586, 246, 522, 202, 586, 310, 522, 246, 650, 138, 714, 138, 714, -10, 586, -10, 586, -74, 522, -74, 522, -118, 586, -246, 886, -246)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 5, 6, 7), PackedInt32Array(6, 5, 8, 9), PackedInt32Array(10, 9, 8, 11), PackedInt32Array(10, 11, 12, 13), PackedInt32Array(13, 12, 14, 15), PackedInt32Array(16, 4, 7, 17), PackedInt32Array(18, 19, 20, 21), PackedInt32Array(21, 22, 23, 24), PackedInt32Array(25, 17, 26, 15, 27, 28), PackedInt32Array(14, 29, 27, 15), PackedInt32Array(27, 30, 28), PackedInt32Array(25, 31, 32, 17), PackedInt32Array(23, 16, 17, 32, 33), PackedInt32Array(33, 34, 35), PackedInt32Array(35, 36, 37, 24), PackedInt32Array(24, 38, 39, 18), PackedInt32Array(24, 18, 21), PackedInt32Array(24, 23, 33, 35)])
source_geometry_group_name = &"navigation_polygon_source_group"

[sub_resource type="NavigationPolygon" id="NavigationPolygon_3shhj"]
source_geometry_group_name = &"navigation_polygon_source_group"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7yswp"]
size = Vector2(192, 128)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_q7au5"]
size = Vector2(72, 72)

[node name="World" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_pyj42")
quest_file_paths = PackedStringArray("res://assets/maps/world/world.quest.txt", "res://assets/maps/world/tutorial.quest.txt")
init_actions = PackedStringArray("InitTutorials")

[node name="Env" type="Node2D" parent="."]
y_sort_enabled = true

[node name="Initial Island" type="TileMap" parent="Env"]
z_index = -2
tile_set = ExtResource("1_p5wdm")
format = 2
layer_0/tile_data = PackedInt32Array(131075, 65536, 12, 196610, 65536, 12, 196612, 65536, 12, 262147, 65536, 12, 327684, 65536, 12, 262149, 65536, 12, 131077, 65536, 12, 131076, 131072, 12, 262148, 131072, 12, 262146, 131072, 12, 262150, 131072, 13, 196613, 131072, 65548, 131074, 131072, 65548, 196615, 0, 65536, 196611, 131072, 13, 65538, 65536, 11, 65539, 65536, 11, 65540, 65536, 11, 65541, 65536, 11, 65537, 0, 11, 131073, 0, 12, 196609, 0, 12, 262145, 0, 12, 327681, 0, 13, 327682, 65536, 13, 327683, 262144, 13, 393219, 0, 13, 393220, 0, 0, 393221, 65536, 13, 393222, 196608, 13, 327686, 327680, 13, 327687, 196608, 13, 262151, 196608, 12, 131079, 196608, 12, 65543, 196608, 11, 65542, 65536, 11, 131078, 131072, 13, 327685, 131072, 13, 196614, 65536, 12, 458756, 0, 0, 524291, 131072, 0, 524292, 393216, 1, 524293, 262144, 0, 589829, 262144, 1, 589828, 65536, 1, 589827, 196608, 1, 524290, 393216, 3, 524294, 327680, 3, 589830, 196608, 3, 589826, 196608, 3, 589825, 131072, 0, 589831, 262144, 0, 589824, 65536, 0, 589832, 327680, 0, 655360, 65536, 0, 720896, 65536, 0, 786432, 65536, 0, 851968, 65536, 0, 655361, 131072, 1, 655362, 262144, 1, 655363, 393216, 1, 655364, 65536, 4, 655365, 65536, 1, 655366, 65536, 1, 655367, 262144, 1, 720903, 65536, 1, 786439, 65536, 1, 851975, 65536, 1, 851974, 65536, 1, 851973, 65536, 1, 851972, 393216, 1, 851971, 65536, 1, 851970, 65536, 1, 851969, 65536, 1, 786433, 393216, 1, 720897, 65536, 1, 720898, 393216, 1, 720899, 65536, 4, 720900, 0, 4, 720901, 65536, 4, 720902, 393216, 1, 786438, 393216, 4, 786437, 393216, 4, 786436, 65536, 4, 786435, 393216, 4, 786434, 327680, 4, 655368, 327680, 0, 720904, 327680, 0, 786440, 327680, 0, 851976, 327680, 0, 917505, 131072, 2, 917506, 196608, 2, 917507, 196608, 2, 917508, 131072, 2, 917509, 196608, 2, 917510, 196608, 2, 917511, 196608, 2, 917512, 262144, 2, 917504, 0, 2)

[node name="ControlsTutDoor" parent="Env/Initial Island" instance=ExtResource("3_nybb2")]
position = Vector2(256, 512)

[node name="RespawnArea" parent="Env/Initial Island" instance=ExtResource("4_pjj1e")]
position = Vector2(229, 232)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Env/Initial Island/RespawnArea"]
position = Vector2(59, 184)
shape = SubResource("RectangleShape2D_eq726")

[node name="Flying Island" type="NavigationRegion2D" parent="Env"]
y_sort_enabled = true
navigation_polygon = SubResource("NavigationPolygon_3h272")

[node name="TileMap" type="TileMap" parent="Env/Flying Island"]
z_index = -2
tile_set = ExtResource("1_p5wdm")
format = 2
layer_0/tile_data = PackedInt32Array(196616, 0, 65536, 131081, 393216, 6, 196617, 131072, 6, 262153, 65536, 6, 327689, 327680, 7, 327690, 65536, 10, 327691, 131072, 10, 327692, 196608, 10, 327693, 393216, 7, 262157, 196608, 10, 196621, 196608, 8, 131085, 65536, 6, 131084, 131072, 6, 131083, 65536, 6, 131082, 131072, 6, 196618, 196608, 7, 196619, 65536, 8, 196620, 131072, 8, 262155, 262144, 8, 262154, 65536, 8, 262156, 327680, 9, 65546, 65536, 5, 65547, 0, 0, 65548, 65536, 5, 65549, 65536, 5, 65545, 0, 5, 131080, 0, 5, 262152, 0, 7, 393225, 0, 7, 393229, 131072, 7, 393226, 65536, 7, 393227, 65536, 7, 393228, 65536, 7, 327694, 131072, 7, 262158, 196608, 6, 196622, 196608, 6, 131086, 196608, 6, 65550, 131072, 5, 11, 0, 0, 10, 196608, 2, 9, 131072, 2, 12, 196608, 2, 13, 131072, 2, -65527, 327680, 1, -65526, 393216, 4, -65525, 65536, 1, -65524, 393216, 4, -65523, 327680, 1, -131064, 196608, 1, -131058, 262144, 1, -65522, 131072, 2, -65528, 131072, 2, -327672, 65536, 0, -327671, 131072, 0, -327670, 393216, 0, -327669, 65536, 4, -327668, 393216, 0, -327667, 262144, 0, -327666, 327680, 0, -262136, 65536, 0, -196600, 131072, 0, -262130, 327680, 0, -196594, 262144, 0, -262135, 131072, 1, -262134, 196608, 1, -262133, 262144, 1, -262132, 196608, 1, -262131, 131072, 1, -196599, 327680, 1, -131063, 393216, 1, -131062, 65536, 1, -131061, 393216, 4, -131060, 327680, 1, -131059, 393216, 1, -196595, 65536, 1, -196596, 393216, 4, -196597, 327680, 1, -196598, 393216, 4, -196601, 65536, 0, -131065, 393216, 3, -65529, 196608, 2, -65521, 196608, 2, -131057, 327680, 3, -196593, 327680, 0, -393205, 0, 0, -458741, 0, 0)

[node name="FightingTutDoor" parent="Env/Flying Island/TileMap" instance=ExtResource("3_nybb2")]
position = Vector2(704, -320)

[node name="Objects" type="Node2D" parent="Env/Flying Island"]
y_sort_enabled = true
position = Vector2(3, 0)

[node name="FightingTutEnemy" parent="Env/Flying Island/Objects" instance=ExtResource("2_7maf6")]
position = Vector2(737, -78)
respawn_on_dead = true

[node name="Heart" parent="Env/Flying Island/Objects" instance=ExtResource("3_x1x0j")]
position = Vector2(669, -155)

[node name="Heart2" parent="Env/Flying Island/Objects" instance=ExtResource("3_x1x0j")]
position = Vector2(798, -155)

[node name="Key Island" type="NavigationRegion2D" parent="Env"]
y_sort_enabled = true
position = Vector2(512, -512)
navigation_polygon = SubResource("NavigationPolygon_3shhj")

[node name="TileMap" type="TileMap" parent="Env/Key Island"]
z_index = -2
position = Vector2(-512, 512)
tile_set = ExtResource("1_p5wdm")
format = 2
layer_0/tile_data = PackedInt32Array(-524277, 393216, 1, -524278, 0, 1, -524276, 393216, 1, -589814, 393216, 1, -589813, 65536, 1, -589812, 393216, 1, -655350, 65536, 1, -655349, 393216, 1, -655348, 65536, 1, -720884, 262144, 1, -720885, 65536, 1, -720886, 196608, 1, -786422, 131072, 0, -786423, 65536, 0, -786420, 262144, 0, -786419, 327680, 0, -720883, 327680, 0, -655347, 327680, 0, -589811, 327680, 0, -524275, 327680, 3, -458739, 196608, 2, -458740, 131072, 2, -458742, 131072, 2, -720887, 196608, 0, -655351, 262144, 1, -589815, 327680, 1, -786421, 65536, 1, -655352, 196608, 4, -589816, 65536, 1, -655353, 131072, 1, -589817, 65536, 4, -655354, 262144, 4, -589818, 65536, 1, -655355, 65536, 1, -589819, 65536, 4, -655356, 393216, 4, -589820, 65536, 1, -720888, 196608, 3, -720889, 196608, 0, -720890, 196608, 0, -720891, 196608, 3, -720892, 131072, 0, -524279, 131072, 2, -524281, 196608, 2, -524282, 196608, 2, -524283, 131072, 2, -524284, 196608, 2, -524280, 196608, 2, -720893, 393216, 3, -655357, 196608, 0, -589821, 0, 4, -524285, 196608, 2, -655358, 393216, 0, -655359, 196608, 0, -655360, 393216, 0, -589825, 131072, 0, -589826, 65536, 0, -589822, 327680, 1, -589823, 262144, 4, -589824, 196608, 1, -524289, 262144, 4, -524286, 131072, 2, -524288, 131072, 2, -458753, 196608, 2, -524290, 393216, 3, -458754, 196608, 2, -524287, 0, 0, -458751, 0, 0, -393215, 65536, 6, -393214, 131072, 6, -393216, 131072, 6, -458752, 65536, 5, -458750, 65536, 5, -393217, 0, 5, -458749, 65536, 5, -393213, 65536, 6, -327681, 0, 6, -327680, 65536, 7, -327678, 65536, 7, -327679, 262144, 7, -262145, 0, 7, -327677, 65536, 7, -131073, 0, 6, -65537, 0, 6, -1, 0, 6, -196608, 65536, 8, -131072, 65536, 9, -65536, 65536, 10, -196607, 131072, 8, -131071, 0, 10, -65535, 131072, 10, -196606, 196608, 8, -131070, 196608, 9, -65534, 196608, 10, -196605, 196608, 6, -131069, 196608, 6, -65533, 196608, 6, 65535, 0, 7, 0, 65536, 7, 1, 65536, 7, 2, 65536, 7, 3, 131072, 7, -196609, 0, 6, -262144, 65536, 6, -262142, 65536, 6, -262143, 262144, 6, -262141, 196608, 6, -458748, 131072, 5, -393212, 196608, 6, -327676, 131072, 7)

[node name="KeyTutDoor" parent="Env/Key Island/TileMap" instance=ExtResource("3_nybb2")]
position = Vector2(704, -768)

[node name="Objects" type="Node2D" parent="Env/Key Island"]
y_sort_enabled = true

[node name="TutorialKey" parent="Env/Key Island/Objects" instance=ExtResource("7_ynw14")]
position = Vector2(-415, 417)

[node name="Puzzle Island" type="Node2D" parent="Env"]
y_sort_enabled = true
position = Vector2(512, -1024)

[node name="TileMap" type="TileMap" parent="Env/Puzzle Island"]
z_index = -2
position = Vector2(-512, 1024)
tile_set = ExtResource("1_p5wdm")
format = 2
layer_0/tile_data = PackedInt32Array(-851957, 0, 0, -917493, 0, 0, -917494, 65536, 13, -917492, 65536, 13, -917495, 0, 13, -917491, 196608, 13, -983030, 131072, 12, -983029, 131072, 13, -983028, 131072, 12, -1048565, 131072, 12, -1048566, 65536, 12, -1048564, 65536, 12, -983031, 0, 12, -1048567, 0, 65536, -983027, 196608, 12, -1048563, 196608, 12, -1114103, 0, 11, -1114099, 196608, 11, -1114102, 65536, 11, -1114100, 65536, 11, -1114101, 0, 0, -1048568, 0, 65536, -720895, 0, 1, -720896, 393216, 3, -786432, 393216, 2, -786431, 393216, 1, -786430, 327680, 0, -720894, 327680, 3, -1179637, 0, 0, -1245174, 196608, 0, -1245172, 196608, 0, -1245173, 65536, 1, -1310711, 65536, 0, -1245175, 0, 2, -1245171, 262144, 2, -1310707, 327680, 0, -1179638, 196608, 2, -1179636, 131072, 2, -1310710, 0, 1, -1310709, 0, 1, -1310708, 0, 1, -1376244, 0, 1, -1376245, 0, 1, -1376246, 0, 1, -1376247, 65536, 0, -1376243, 327680, 0, -1441783, 65536, 0, -1441779, 327680, 0, -1441782, 131072, 0, -1441780, 262144, 0, -1441781, 196608, 0, -1048569, 0, 65536, -1048570, 327680, 4, -1048571, 393216, 1, -1048572, 327680, 4, -1048573, 0, 1, -1114109, 393216, 4, -1114108, 393216, 1, -1114107, 0, 4, -983034, 131072, 2, -983035, 131072, 2, -983036, 196608, 2, -983037, 196608, 2, -983038, 196608, 2, -1048574, 393216, 3, -1114110, 65536, 0, -1114112, 327680, 1, -1048576, 327680, 1, -983040, 65536, 1, -917504, 327680, 1, -851968, 65536, 1, -851967, 262144, 1, -1114111, 327680, 0, -1048575, 327680, 0, -983039, 327680, 0, -917503, 262144, 0, -917502, 327680, 0, -851966, 327680, 0, -720897, 0, 2, -786433, 65536, 0, -851969, 65536, 0, -917505, 65536, 0, -983041, 65536, 0, -1048577, 65536, 0, -1245185, 65536, 0, -1179649, 65536, 0, -1114113, 65536, 0, -1310720, 131072, 0, -1245184, 131072, 1, -1179648, 393216, 1, -1310719, 327680, 3, -1245183, 0, 65536, -1179647, 327680, 0, -1310718, 393216, 3, -1245182, 0, 65536, -1179646, 65536, 0, -1310717, 131072, 0, -1245181, 196608, 4, -1179645, 393216, 1, -1310716, 196608, 3, -1245180, 262144, 1, -1179644, 327680, 4, -1310715, 196608, 3, -1245179, 196608, 4, -1179643, 0, 1, -1310714, 262144, 0, -1245178, 262144, 1, -1179642, 0, 4, -1114106, 0, 1, -1310713, 327680, 0, -1245177, 327680, 0, -1179641, 327680, 0, -1114105, 327680, 3, -983033, 196608, 2, -917500, 131072, 4, -917499, 196608, 4, -851963, 131072, 2, -851964, 131072, 2, -917501, 262144, 4, -917498, 327680, 4, -851965, 196608, 2, -851962, 196608, 2)

[node name="RespawnArea" parent="Env/Puzzle Island/TileMap" instance=ExtResource("4_pjj1e")]
position = Vector2(735, -928)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Env/Puzzle Island/TileMap/RespawnArea"]
position = Vector2(1, 96)
shape = SubResource("RectangleShape2D_7yswp")

[node name="PuzzleTutBlocks" type="Node2D" parent="Env/Puzzle Island"]
y_sort_enabled = true
position = Vector2(-192, -64)

[node name="PuzzleTutBlock01" type="StaticBody2D" parent="Env/Puzzle Island/PuzzleTutBlocks"]
y_sort_enabled = true
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Env/Puzzle Island/PuzzleTutBlocks/PuzzleTutBlock01"]
position = Vector2(32, 32)
shape = SubResource("RectangleShape2D_q7au5")

[node name="TextureRect" type="TextureRect" parent="Env/Puzzle Island/PuzzleTutBlocks/PuzzleTutBlock01"]
offset_left = -2.0
offset_top = -15.0
offset_right = 66.0
offset_bottom = 64.0
texture = ExtResource("8_ih6g7")

[node name="PuzzleTutBlock02" type="StaticBody2D" parent="Env/Puzzle Island/PuzzleTutBlocks"]
y_sort_enabled = true
position = Vector2(-128, 0)
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Env/Puzzle Island/PuzzleTutBlocks/PuzzleTutBlock02"]
position = Vector2(32, 32)
shape = SubResource("RectangleShape2D_q7au5")

[node name="TextureRect" type="TextureRect" parent="Env/Puzzle Island/PuzzleTutBlocks/PuzzleTutBlock02"]
offset_left = -2.0
offset_top = -15.0
offset_right = 66.0
offset_bottom = 64.0
texture = ExtResource("8_ih6g7")

[node name="PuzzleTutBlock03" type="StaticBody2D" parent="Env/Puzzle Island/PuzzleTutBlocks"]
y_sort_enabled = true
position = Vector2(-64, -64)
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Env/Puzzle Island/PuzzleTutBlocks/PuzzleTutBlock03"]
position = Vector2(32, 32)
shape = SubResource("RectangleShape2D_q7au5")

[node name="TextureRect" type="TextureRect" parent="Env/Puzzle Island/PuzzleTutBlocks/PuzzleTutBlock03"]
offset_left = -2.0
offset_top = -15.0
offset_right = 66.0
offset_bottom = 64.0
texture = ExtResource("8_ih6g7")

[node name="PuzzleTutBlock04" type="StaticBody2D" parent="Env/Puzzle Island/PuzzleTutBlocks"]
y_sort_enabled = true
position = Vector2(0, -128)
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Env/Puzzle Island/PuzzleTutBlocks/PuzzleTutBlock04"]
position = Vector2(32, 32)
shape = SubResource("RectangleShape2D_q7au5")

[node name="TextureRect" type="TextureRect" parent="Env/Puzzle Island/PuzzleTutBlocks/PuzzleTutBlock04"]
offset_left = -2.0
offset_top = -15.0
offset_right = 66.0
offset_bottom = 64.0
texture = ExtResource("8_ih6g7")

[node name="PuzzleTutBlock05" type="StaticBody2D" parent="Env/Puzzle Island/PuzzleTutBlocks"]
y_sort_enabled = true
position = Vector2(64, -64)
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Env/Puzzle Island/PuzzleTutBlocks/PuzzleTutBlock05"]
position = Vector2(32, 32)
shape = SubResource("RectangleShape2D_q7au5")

[node name="TextureRect" type="TextureRect" parent="Env/Puzzle Island/PuzzleTutBlocks/PuzzleTutBlock05"]
offset_left = -2.0
offset_top = -15.0
offset_right = 66.0
offset_bottom = 64.0
texture = ExtResource("8_ih6g7")

[node name="PuzzleArea" type="ColorRect" parent="Env/Puzzle Island"]
visible = false
offset_left = -320.0
offset_top = -192.0
offset_right = -64.0
offset_bottom = 64.0

[node name="BigHeart" parent="Env/Puzzle Island" instance=ExtResource("9_s6f1u")]
position = Vector2(-415, 350)
